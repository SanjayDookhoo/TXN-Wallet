(this["webpackJsonpio.cordova.hellocordova"]=this["webpackJsonpio.cordova.hellocordova"]||[]).push([[0],{101:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),o=n.n(c),s=n(37),u=n(43),i=n(76),l=n(11),b="AUTH",d="SIGN_OUT",j="GET",p="POST",f="PATCH",O="DELETE",m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return localStorage.setItem("profile",JSON.stringify(Object(l.a)({},null===t||void 0===t?void 0:t.payload))),Object(l.a)(Object(l.a)({},e),{},{user:t.payload});case d:return localStorage.clear(),Object(l.a)(Object(l.a)({},e),{},{user:null});default:return e}},h=n(20),v={customer:{name:{type:"string"},address:{type:"string"},age:{type:"integer"}},invoice:{amount:{type:"integer"},_foreign_key:{table:"customer",on_delete:"cascade"}}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(console.log({payload:t.payload}),t.type){case j:var n=t.payload.res.result,a=Object(l.a)({},e);return Object.entries(n).forEach((function(e){var t=Object(h.a)(e,2),n=t[0],r=t[1];a[n]=Object.fromEntries(r.map((function(e){return[e.id,e]})))})),a;case p:var r=t.payload.res.result,c=t.payload,o=c.table_name,s=c.req_body,u=Object(l.a)({},e);return r.forEach((function(e,t){u[o][e.id]=Object(l.a)(Object(l.a)({},e),s.inserts[t])})),u;case f:t.payload.res.result;var i=t.payload,b=i.table_name,d=i.req_body,m=Object(l.a)({},e);return Object.entries(d.updates).forEach((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];m[b][n]=Object(l.a)(Object(l.a)({},m[b][n]),a)})),m;case O:t.payload.res.result;var y=t.payload,_=y.table_name,x=y.req_body,g=Object(l.a)({},e),w=function e(t){var n=t.table_name,a=t.ids;a.forEach((function(e){delete g[n][e]})),Object.entries(v).filter((function(e){var t,a,r=Object(h.a)(e,2),c=(r[0],r[1]);return(null===c||void 0===c||null===(t=c._foreign_key)||void 0===t?void 0:t.table)+"s"===n&&"cascade"===(null===c||void 0===c||null===(a=c._foreign_key)||void 0===a?void 0:a.on_delete)})).map((function(e){var t=Object(h.a)(e,2),n=t[0];t[1];return n+"s"})).forEach((function(t){var r=Object.values(g[t]).filter((function(e){return console.log({direct_children_table_record:e}),a.includes(e["".concat(n.slice(0,-1),"_id")])})).map((function(e){return e.id}));e({table_name:t,ids:r})}))};return w({table_name:_,ids:x.ids}),g;default:return e}},_=Object(u.b)({auth:m,database:y}),x=(n(101),n(85)),g=n(50),w=n(14),S=n(77),q=n(51),k=n(54),F=n(164),C=n(165),E=n(169),I=n(167),N=n(82),P=n.n(N),T=n(83),A=n.n(T),D=n(4),U=function(e){var t=e.name,n=e.handleChange,a=e.label,r=e.half,c=e.autoFocus,o=e.type,s=e.handleShowPassword;return Object(D.jsx)(F.a,{item:!0,xs:12,sm:r?6:12,children:Object(D.jsx)(C.a,{name:t,onChange:n,variant:"outlined",required:!0,fullWidth:!0,label:a,autoFocus:c,type:o,InputProps:"password"===t?{endAdornment:Object(D.jsx)(E.a,{position:"end",children:Object(D.jsx)(I.a,{onClick:s,children:"password"===o?Object(D.jsx)(P.a,{}):Object(D.jsx)(A.a,{})})})}:null})})},J=n(16),L=n.n(J),B=n(29),G=n(84),H=n.n(G).a.create({baseURL:"http://192.168.0.10:5000"});H.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var R=function(e){var t=e.req_body;return H.post("/user/signIn",t)},z=function(e){var t=e.req_body;return H.post("/user/signUp",t)},M=function(e){var t=e.table_name,n=e.req_params;return H.get("/".concat(t),{params:n})},W=function(e){var t=e.table_name,n=e.req_body;return H.post("/".concat(t),n)},K=function(e){var t=e.table_name,n=e.req_body;return H.patch("/".concat(t),n)},Q=function(e){var t=e.table_name,n=e.req_body;return H.delete("/".concat(t),{data:n})},V={email:"",password:"",confirm_password:""},X=function(){var e=Object(s.b)(),t=Object(w.g)(),n=Object(k.b)().enqueueSnackbar,r=Object(a.useState)(V),c=Object(h.a)(r,2),o=c[0],u=c[1],i=Object(a.useState)(!1),d=Object(h.a)(i,2),j=d[0],p=d[1],f=Object(a.useState)(!1),O=Object(h.a)(f,2),m=O[0],v=O[1],y=function(e){return u(Object(l.a)(Object(l.a)({},o),{},Object(q.a)({},e.target.name,e.target.value)))};return Object(D.jsxs)("div",{className:"w-1/3 mx-auto card flex flex-col justify-center items-center",children:[Object(D.jsx)("div",{className:"text-lg",children:j?"Sign up":"Sign in"}),Object(D.jsxs)("form",{onSubmit:function(a){a.preventDefault(),console.log({is_signup:j}),j?o.password===o.confirm_password?e(function(e){var t=e.req_body,n=e.onSuccess,a=e.onFailure;return function(){var e=Object(B.a)(L.a.mark((function e(r){var c,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z({req_body:t});case 3:c=e.sent,o=c.data,r({type:b,payload:o}),n&&n(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),a&&a(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}({req_body:o,onSuccess:function(){return t.push("/")},onFailure:function(){return n("Email already in use",{variant:"error"})}})):n("Passwords do not match, try again",{variant:"error"}):e(function(e){var t=e.req_body,n=e.onSuccess,a=e.onFailure;return function(){var e=Object(B.a)(L.a.mark((function e(r){var c,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R({req_body:t});case 3:c=e.sent,o=c.data,r({type:b,payload:o}),n&&n(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),a&&a(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}({req_body:o,onSuccess:function(){return t.push("/")},onFailure:function(){return n("Incorrect credentials",{variant:"error"})}}))},children:[Object(D.jsxs)("div",{className:"flex-col justify-center items-center",children:[Object(D.jsx)(U,{name:"email",label:"Email Address",value:o.email,handleChange:y,type:"email"}),Object(D.jsx)(U,{name:"password",label:"Password",value:o.password,handleChange:y,type:m?"text":"password",handleShowPassword:function(){return v(!m)}}),j&&Object(D.jsx)(U,{name:"confirm_password",label:"Repeat Password",value:o.confirm_password,handleChange:y,type:"password"})]}),Object(D.jsx)("div",{className:"clear-both"}),Object(D.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(D.jsx)("button",{type:"submit",children:j?"Sign Up":"Sign In"}),Object(D.jsx)("button",{onClick:function(){u(V),p((function(e){return!e})),v(!1)},children:j?"Already have an account? Sign in":"Don't have an account? Sign Up"})]})]})]})},Y=function(){var e=Object(s.b)(),t=Object(w.g)(),n=Object(s.c)((function(e){return e.database}));Object(a.useEffect)((function(){console.log({database:n})}),[n]);return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"text-red-500",children:"Dashboard"}),Object(D.jsx)("button",{onClick:function(){e(function(e){var t=e.onSuccess,n=e.onFailure;return function(){var e=Object(B.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a({type:d}),t&&t()}catch(r){console.log(r),n&&n(r)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({onSuccess:function(){return t.push("/auth")}}))},children:"sign out button"})," ",Object(D.jsx)("br",{}),Object(D.jsx)("button",{onClick:function(){e(function(e){var t=e.table_name,n=e.req_params,a=e.onSuccess,r=e.onFailure;return function(){var e=Object(B.a)(L.a.mark((function e(c){var o,s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M({table_name:t,req_params:n});case 3:o=e.sent,s=o.data,c({type:j,payload:{table_name:t,req_params:n,res:s}}),a&&a(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r&&r(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}({table_name:"customers",req_params:{name:"sanjay"}}))},children:"get button"})," ",Object(D.jsx)("br",{}),Object(D.jsx)("button",{onClick:function(){e(function(e){var t=e.table_name,n=e.req_body,a=e.onSuccess,r=e.onFailure;return function(){var e=Object(B.a)(L.a.mark((function e(c){var o,s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W({table_name:t,req_body:n});case 3:o=e.sent,s=o.data,c({type:p,payload:{table_name:t,req_body:n,res:s}}),a&&a(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r&&r(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}({table_name:"customers",req_body:{inserts:[{name:"sanjay",address:"orange",age:12}]}}))},children:"post button"})," ",Object(D.jsx)("br",{}),Object(D.jsx)("button",{onClick:function(){e(function(e){var t=e.table_name,n=e.req_body,a=e.onSuccess,r=e.onFailure;return function(){var e=Object(B.a)(L.a.mark((function e(c){var o,s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K({table_name:t,req_body:n});case 3:o=e.sent,s=o.data,c({type:f,payload:{table_name:t,req_body:n,res:s}}),a&&a(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r&&r(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}({table_name:"customers",req_body:{updates:{1:{name:"bobss",age:13}}}}))},children:"patch button"})," ",Object(D.jsx)("br",{}),Object(D.jsx)("button",{onClick:function(){e(function(e){var t=e.table_name,n=e.req_body,a=e.onSuccess,r=e.onFailure;return function(){var e=Object(B.a)(L.a.mark((function e(c){var o,s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q({table_name:t,req_body:n});case 3:o=e.sent,s=o.data,c({type:O,payload:{table_name:t,req_body:n,res:s}}),a&&a(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r&&r(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}({table_name:"customers",req_body:{ids:[3]}}))},children:"delete button"})," ",Object(D.jsx)("br",{})]})},Z=function(){return Object(D.jsx)("div",{children:"Page Not Found - 404"})},$=["path","component","auth_route_type"],ee=function(){return Object(D.jsx)(g.a,{children:Object(D.jsxs)(w.d,{children:[Object(D.jsx)(te,{path:"/",exact:!0,component:Y}),Object(D.jsx)(te,{path:"/auth",exact:!0,component:X,auth_route_type:!0}),Object(D.jsx)(w.b,{component:Z})]})})},te=function(e){var t=e.path,n=e.component,r=e.auth_route_type,c=Object(x.a)(e,$),o=Object(a.useState)(!1),s=Object(h.a)(o,2),u=s[0],i=s[1],b=Object(a.useState)(!0),d=Object(h.a)(b,2),j=d[0],p=d[1];return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("profile")),t=null===e||void 0===e?void 0:e.token;t?1e3*Object(S.a)(t).exp<(new Date).getTime()?i(!1):i(!0):i(!1);p(!1)}),[t]),Object(D.jsx)(D.Fragment,{children:!j&&Object(D.jsx)(w.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return Object(D.jsxs)(D.Fragment,{children:[r&&!u&&Object(D.jsx)(n,Object(l.a)({},e)),r&&u&&Object(D.jsx)(w.a,{to:{pathname:"/",state:{from:e.location}}}),!r&&u&&Object(D.jsx)(n,Object(l.a)({},e)),!r&&!u&&Object(D.jsx)(w.a,{to:{pathname:"/auth",state:{from:e.location}}})]})}}))})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,170)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},ae=Object(u.d)(_,Object(u.c)(Object(u.a)(i.a))),re=function(){o.a.render(Object(D.jsx)(s.a,{store:ae,children:Object(D.jsx)(k.a,{maxSnack:3,children:Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(ee,{})})})}),document.getElementById("root"))};window.cordova?document.addEventListener("deviceready",(function(){re()}),!1):re(),ne()}},[[128,1,2]]]);
//# sourceMappingURL=main.0d430650.chunk.js.map